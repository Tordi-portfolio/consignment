{% extends "base.html" %}

{% block content %}
<div class="chat-container">
    <h2>Chat with Customer Support</h2>
    
    <div class="chat-box">
        {% for msg in messages %}
            <div class="{% if msg.sender == request.user %}user-msg{% else %}admin-msg{% endif %}">
                <strong>{{ msg.sender.username }}:</strong> {{ msg.message }} 
                <small class="timestamp">{{ msg.timestamp|date:"M d, H:i" }}</small>
            </div>
        {% endfor %}
    </div>

    <form method="POST">
        {% csrf_token %}
        <textarea name="message" placeholder="Type your message..." required></textarea>
        <button type="submit">Send</button>
    </form>
</div>

<style>
.chat-container {
    max-width: 600px;
    margin: 40px auto;
    padding: 20px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.chat-box {
    max-height: 400px;
    overflow-y: auto;
    margin-bottom: 20px;
    border: 1px solid #ddd;
    padding: 10px;
    background: #f9f9f9;
}

.user-msg, .admin-msg {
    margin: 8px 0;
    padding: 8px 12px;
    border-radius: 6px;
    max-width: 70%;
}

.user-msg {
    background: #d1e7dd;
    margin-left: auto;
    text-align: right;
}

.admin-msg {
    background: #f8d7da;
    margin-right: auto;
    text-align: left;
}

.timestamp {
    display: block;
    font-size: 0.75em;
    color: #666;
    margin-top: 4px;
}

textarea {
    width: 100%;
    height: 70px;
    margin-bottom: 10px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

button {
    background: #0d6efd;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

button:hover {
    background: #0b5ed7;
}
</style>
{% endblock %}
